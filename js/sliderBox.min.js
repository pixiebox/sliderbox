;(function(f){var v=!1,q="ontouchstart"in window,B=q?"orientationchange":"resize",C="devicePixelRatio"in window?window.devicePixelRatio:1,A=function(D,n,A){function m(k,d){if(v)setTimeout(function(){m(k,d)},100);else{var h=c.width(),b=f(".item",l).length-1,e;c.data("busyAnimating",!0);switch(k){case "prev":a.currentSlide=0===a.currentSlide?b:a.currentSlide-1;e={marginLeft:-(h*a.currentSlide)};break;case "next":a.currentSlide=a.currentSlide===b?0:a.currentSlide+1;e={marginLeft:-(h*a.currentSlide)};
break;case "goto":a.currentSlide=d,e={marginLeft:-(h*d)}}a.navigation&&f(".slider-nav a",c).removeClass("active").eq(a.currentSlide).addClass("active");l.animate(e,a.speed,function(){c.data("busyAnimating",!1);r(c)})}}function p(k,d){var a=c.add(c.find("img")).filter("img"),b=a.length;b?a.each(function(){var a=f(this),h=function(){a.off("load error",h);k?(b--,0==b&&d()):d()};a.on("load error",h);if("complete"==this.readyState)a.trigger("load");else if(this.readyState)this.src=this.src;else if(this.complete)a.trigger("load");
else if(void 0===this.complete){var c=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";this.src=c}}):d()}function u(){E(c,a.navigation);a.responsive&&a.breakpoints.constructor===Array&&a.breakpoints.length?x(c):p(!1,function(){var a=f(".item",c),d=c.width(),h=a.length*d;a.width(d);f(".placeholder",c).width(h);r(c)});"onComplete"in a&&p(!0,a.onComplete);c.on("click",".navigate",function(a){a.preventDefault();a=f(a.currentTarget).index();m("goto",a)});if(q)c.on("touchstart touchmove touchend",
function(a){var d;if("undefined"!==typeof a&&"undefined"!==typeof a.originalEvent.touches)switch(d=a.originalEvent.touches[0],a.originalEvent.type){case "touchstart":g[a.originalEvent.type].x=d.pageX;g[a.originalEvent.type].y=d.pageY;break;case "touchmove":g[a.originalEvent.type].x=d.pageX;g[a.originalEvent.type].y=d.pageY;break;case "touchend":c.data("busyAnimating")||(g[a.originalEvent.type]=!0,-1<g.touchstart.x&&-1<g.touchmove.x&&(a=Math.abs(g.touchstart.x-g.touchmove.x),d=Math.abs(g.touchstart.y-
g.touchmove.y),a>d&&a>.33*w()&&(g.direction=g.touchstart.x<g.touchmove.x?"left":"right","left"===g.direction?m("prev"):"right"===g.direction&&m("next"))))}t.stopAuto()});else c.on("click",".prev, .next",function(a){a.preventDefault();t.stopAuto();m(this.rel)});if(a.responsive)f(window).on(B,F(function(){x(c)},250))}var c=f(D),l=c.find(".placeholder");n=n||{};var a=f.extend({},f.fn.sliderBox.defaults,n),g={touchstart:{x:-1,y:-1},touchmove:{x:-1,y:-1},touchend:!1,direction:"undetermined"},y,t={addSlides:function(k){var d=
f(".item",l).eq(0).clone(),h;"breakpoints"in a&&(viewPortWidth=w(),breakpoint=z(a.breakpoints,viewPortWidth),breakpointVal=breakpoint.folder-0);for(var b=0;b<k.length;b++){for(var e in k[b])"img"===e?"breakpoints"in a?d.attr("data-img",k[b][e].src).attr("data-breakpoint",k[b][e].folder).find("img").attr("src",("path"in a&&"absolute"===a.path?"/":"")+k[b][e].folder.replace("{folder}",breakpointVal)+k[b][e].src):d.find("img").attr("src",("path"in a&&"absolute"===a.path?"/":"")+k[b][e].folder+k[b][e].src):
f(".item ."+e,d).html(k[b][e]);l.append(d);b||(h=f(".item",l).length-1)}k=f(".item",l);d=k.length*k.eq(0).width();n.currentSlide=k.length-1;l.width(d);m("goto",h)},removeSlider:function(){c.remove()},startAuto:function(){if(!1 in a||!a.auto)a.auto=3E3;y=setInterval(function(){m("next")},a.auto)},stopAuto:function(){clearInterval(y)}},F=function(a,d,h){var b;return function(){var e=this,f=arguments,c=h&&!b;clearTimeout(b);b=setTimeout(function(){b=null;h||a.apply(e,f)},d);c&&a.apply(e,f)}},w=function(){for(var a=
0,d=Math,h=window.screen.width,b=[window.innerWidth,window.document.documentElement.clientWidth,window.document.documentElement.offsetWidth,window.document.body.clientWidth],e;a<b.length;a++)isNaN(b[a])&&(b.splice(a,1),a--);b.length&&(e=d.max.apply(d,b),isNaN(h)||(e=d.min(h,e)));return e||h||0},x=function d(h){var b,e,c,g;t.stopAuto();h.data("busyAnimating")?setTimeout(function(){d(h)},250):(b=w(),b=z(a.breakpoints,b),e=b.folder-0,b=h.parent().width(),g=f(".placeholder",h),c=f(".item",g),v=!1,h.width(b),
c.width(b),g.css({marginLeft:0-b*a.currentSlide,width:b*c.length}),e!==a.currentBreakpoint?(c.each(function(b,d){var c=f(d),g=c.attr("data-breakpoint"),c=c.find("img");if(c.length){if(b===a.currentSlide)c.one("load",function(){r(h)});"undefined"!==typeof g&&!1!==g&&c.attr("src",("path"in a&&"absolute"===a.path?"/":"")+g.replace("{folder}",e)+this.getAttribute("data-img"))}else b===a.currentSlide&&r(h)}),a.currentBreakpoint=e):r(h),a.auto&&t.startAuto())},z=function(a,h){for(var b=h,e=0,c={},f,g,l,
m;f=a[e];){g=f.minWidth;l=f.maxWidth;m="minDevicePixelRatio"in f?f.minDevicePixelRatio:0;if(0<h){if(g&&l&&h>=g&&h<=l||g&&!l&&h>=g||l&&!g&&h<=l)if(!m||m&&C>=m)c=f}else if(0>=b||g<b||l<b)b=g||l||b,c=f;e++}return c},E=function(a,c){if(c||q){a.append('<nav class="slider-nav '+c+'"></nav>');for(var b=f(".slider-nav",a),e=0;e<f(".item",a).length;e++)b.append('<a class="navigate" href="#">'+e+"</a>");f("a.navigate",b).eq(0).addClass("active")}else a.prepend('<a href="#" class="prev" rel="prev">&lt;</a> <a href="#" class="next" rel="next">&gt;</a>')},
r=function(d){var c=f(".item",d).eq(a.currentSlide).outerHeight();d.animate({height:c})};"breakpoints"in a&&!a.responsive&&(a.responsive=!0);"ajax"in a?f.ajax({url:a.ajax,dataType:"json"}).done(function(d){var h=f(".item",c).eq(0),b;if("slides"in d){f(".loading",c).remove();for(var e=0;e<d.slides.length;e++){b=h.clone();for(var g in d.slides[e])"image"===g?a.responsive?b.attr("data-breakpoint",d.slides[e].image.path).attr("data-img",d.slides[e].image.img):b.find("img").attr("src",d.slides[e].image.path+
d.slides[e].image.img):b.find("."+g).html(d.slides[e][g]);l.append(b);"image"in d.slides[e]||f(".item",l).last().find("img").remove()}f(".item",c).eq(0).remove();u()}else throw f(".loading",c).html("No slides found, or misformatted json response."),Error("No slides found, or misformatted json response.");}):u();return t};f.fn.sliderBox=function(q,n){return this.each(function(v,m){var p=f(this);if(p.data("sliderBox"))return p.data("sliderBox");var u=new A(this,q,n);p.data({busyAnimating:!1,sliderBox:u})})};
f.fn.sliderBox.defaults={auto:!1,breakpoints:[{folder:"480",maxWidth:480},{folder:"640",minWidth:481,maxWidth:767},{folder:"900",minWidth:748},{folder:"1170",minWidth:992},{folder:"640",maxWidth:320,minDevicePixelRatio:2},{folder:"1170",minWidth:320,maxWidth:667,minDevicePixelRatio:2},{folder:"2048",minWidth:748,maxWidth:1024,minDevicePixelRatio:2},{folder:"2048",minWidth:414,maxWidth:736,minDevicePixelRatio:3}],currentSlide:0,currentBreakpoint:0,navigation:!1,responsive:!1,speed:500}})(jQuery);