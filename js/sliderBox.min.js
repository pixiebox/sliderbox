(function(b){var s=[],t=!1,u="ontouchstart"in window,v=u?"orientationchange":"resize",w=window.devicePixelRatio||1,p={debounce:function(e,l,d){var b;return function(){var h=this,c=arguments,k=d&&!b;clearTimeout(b);b=setTimeout(function(){b=null;d||e.apply(h,c)},l);k&&e.apply(h,c)}},getViewportWidthInCssPixels:function(){for(var e=0,b=Math,d=window.screen.width,n=[window.innerWidth,window.document.documentElement.clientWidth,window.document.documentElement.offsetWidth,window.document.body.clientWidth],
h;e<n.length;e++)isNaN(n[e])&&(n.splice(e,1),e--);n.length&&(h=b.max.apply(b,n),isNaN(d)||(h=b.min(d,h)));return h||d||0},setBreakpoint:function(e){var l=e.data("options"),d,n,h,c,k;l.auto&&e.data("SliderBox").stopAuto();e.data("busyAnimating")?setTimeout(function(){p.setBreakpoint(e)},250):(d=this.getViewportWidthInCssPixels(),d=this.getBreakpoint(l.breakpoints,d),n="minDevicePixelRatio"in d?d.maxWidth:d.folder-0,d=e.parent().width(),k=e.find(".placeholder"),c=b(".item",k),t=!1,e.width(d),c.width(d),
k.css({marginLeft:0-d*l.currentSlide,width:d*c.length}),n!==l.currentBreakpoint?(c.each(function(c,d){var k=b(d),a=k.attr("data-breakpoint"),r=k.find("img");if(r.length&&"undefined"!==typeof a&&!1!==a){if(c===l.currentSlide)r.one("load",function(){h=k.outerHeight();e.height(h)});r.attr("src",("path"in l&&"absolute"===l.path?"/":"")+a.replace("{folder}",n)+this.getAttribute("data-img"))}else c===l.currentSlide&&(h=k.outerHeight(),e.height(h))}),l.currentBreakpoint=n,e.data("options",l)):(h=c.eq(l.currentSlide).outerHeight(),
e.height(h)),l.auto&&e.data("SliderBox").startAuto())},getBreakpoint:function(e,b){for(var d=b,n=0,h={},c,k,g,f;c=e[n];){k=c.minWidth;g=c.maxWidth;f="minDevicePixelRatio"in c?c.minDevicePixelRatio:0;if(0<b){if(k&&g&&b>=k&&b<=g||k&&!g&&b>=k||g&&!k&&b<=g)if(!f||f&&w>=f)h=c}else if(0>=d||k<d||g<d)d=k||g||d,h=c;n++}return h},removeSlider:function(b){s.pop();b.remove()},error:function(b){throw Error(b);}};b(window).on(v,p.debounce(function(){for(var b=0;b<s.length;b++)p.setBreakpoint(s[b])},250));b.fn.sliderBox=
function(e,l){return this.each(function(){function d(a,r){if(t)setTimeout(function(){d(a,r)},100);else{var e=c.width(),m=b(".item",k).length-1,q=c.data("options"),h,f;c.data("busyAnimating",!0);switch(a){case "prev":q.currentSlide=0==q.currentSlide?m:q.currentSlide-1;f={marginLeft:-(e*q.currentSlide)};break;case "next":q.currentSlide=q.currentSlide==m?0:q.currentSlide+1;f={marginLeft:-(e*q.currentSlide)};break;case "goto":f={marginLeft:-(e*r)}}k.animate(f,g.speed,function(){c.data("busyAnimating",
!1);h=b(".item",c).eq(q.currentSlide).height();c.height(h)})}}function n(a,d){var g=c.add(c.find("img")).filter("img"),m=g.length;m?g.each(function(){var c=b(this),g=function(){c.off("load error",g);a?(m--,0==m&&d()):d()};c.on("load error",g);if("complete"==this.readyState)c.trigger("load");else if(this.readyState)this.src=this.src;else if(this.complete)c.trigger("load");else if(void 0===this.complete){var e=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";
this.src=e}}):d()}function h(){"breakpoints"in g&&g.breakpoints.constructor===Array&&g.breakpoints.length?(p.setBreakpoint(c),s.push(c)):n(!1,function(){var a=b(".item",c),d=a.height(),g=c.width(),e=a.length*c.width();c.height(d);a.width(g);b(".placeholder",c).width(e)});c.on("click",".navigate",function(a){a.preventDefault();a=b(a.currentTarget).index();d("goto",a)});if(u)c.on("touchstart touchmove touchend",function(a){var b;if("undefined"!==typeof a&&"undefined"!==typeof a.originalEvent.touches)switch(b=
a.originalEvent.touches[0],a.originalEvent.type){case "touchstart":f[a.originalEvent.type].x=b.pageX;f[a.originalEvent.type].y=b.pageY;break;case "touchmove":f[a.originalEvent.type].x=b.pageX;f[a.originalEvent.type].y=b.pageY;break;case "touchend":c.data("busyAnimating")||(f[a.originalEvent.type]=!0,-1<f.touchstart.x&&-1<f.touchmove.x&&(a=Math.abs(f.touchstart.x-f.touchmove.x),b=Math.abs(f.touchstart.y-f.touchmove.y),a>b&&a>.33*p.getViewportWidthInCssPixels()&&(f.direction=f.touchstart.x<f.touchmove.x?
"left":"right","left"===f.direction?d("prev"):"right"===f.direction&&d("next"))))}c.data("SliderBox").stopAuto()}),b(".prev, .next",c).css("display","none");else c.on("click",".prev, .next",function(a){a.preventDefault();c.data("SliderBox").stopAuto();d(this.rel)});"onComplete"in g&&n(!0,g.onComplete)}var c=b(this),k=c.find(".placeholder"),g=b.extend({auto:!1,currentSlide:0,currentBreakpoint:0,speed:500},e),f={touchstart:{x:-1,y:-1},touchmove:{x:-1,y:-1},touchend:!1,direction:"undetermined"},l;c.data({busyAnimating:!1,
options:g,SliderBox:{addSlides:function(a){var e=b(".item",k).eq(0).clone(),f;"breakpoints"in g&&(viewPortWidth=p.getViewportWidthInCssPixels(),breakpoint=p.getBreakpoint(g.breakpoints,viewPortWidth),breakpointVal="minDevicePixelRatio"in breakpoint?breakpoint.maxWidth:breakpoint.folder-0);for(var m=0;m<a.length;m++){for(var h in a[m])"img"===h?"breakpoints"in g?e.attr("data-img",a[m][h].src).attr("data-breakpoint",a[m][h].folder).find("img").attr("src",("path"in g&&"absolute"===g.path?"/":"")+a[m][h].folder.replace("{folder}",
breakpointVal)+a[m][h].src):e.find("img").attr("src",("path"in g&&"absolute"===g.path?"/":"")+a[m][h].folder+a[m][h].src):b(".item ."+h,e).html(a[m][h]);k.append(e);m||(f=b(".item",k).length-1)}a=b(".item",k);e=a.length*a.eq(0).width();c.data("options").currentSlide=a.length-1;k.width(e);d("goto",f)},removeSlider:function(){p.removeSlider(c)},startAuto:function(){if(!1 in g||!g.auto)g.auto=3E3;l=setInterval(function(){d("next")},g.auto)},stopAuto:function(){clearInterval(l)}}});"ajax"in g?b.ajax({url:g.ajax,
dataType:"json"}).done(function(a){var e=b(".item",c).eq(0),d;if("slides"in a){b(".loading",c).remove();for(var f=0;f<a.slides.length;f++){d=e.clone();for(key in a.slides[f])"image"===key?"breakpoints"in g?d.attr("data-breakpoint",a.slides[f].image.path).attr("data-img",a.slides[f].image.img):d.find("img").attr("src",a.slides[f].image.path+a.slides[f].image.img):d.find("."+key).html(a.slides[f][key]);k.append(d);"image"in a.slides[f]||b(".item",k).last().find("img").remove()}b(".item",c).eq(0).remove();
h()}else return b(".loading",c).html("No slides found, or misformatted json response."),p.error("No slides found, or misformatted json response.")}):h()})}})(jQuery);